
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.9">
    
    
      
        <title>Nebula Overlay Network Guide - Jetson Cyber & AI Summer Camp</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.4af4bdda.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="light-blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#nebula-overlay-network-guide" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Jetson Cyber &amp; AI Summer Camp" class="md-header__button md-logo" aria-label="Jetson Cyber & AI Summer Camp" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Jetson Cyber & AI Summer Camp
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Nebula Overlay Network Guide
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Jetson Cyber &amp; AI Summer Camp" class="md-nav__button md-logo" aria-label="Jetson Cyber & AI Summer Camp" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Jetson Cyber & AI Summer Camp
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    üî∞ Getting Started with Jetson
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            üî∞ Getting Started with Jetson
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../curriculum/00_sjsujetsontool_guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ‚úÖ sjsujetsontool Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../curriculum/00b_sjsujetsontool_cheatsheet/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    üìã sjsujetsontool Cheatsheet
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../curriculum/01a_nvidia_jetson/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    üîß Introduction to NVIDIA Jetson
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../curriculum/01b_jetson_cuda/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    üöÄ CUDA Programming on Jetson
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    üêß Linux Fundamentals
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            üêß Linux Fundamentals
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../curriculum/02a_linux_basics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    üí° Linux OS Basics
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../curriculum/03a_linux_networking_tools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    üåê Linux Networking Tools
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    ü§ñ AI & LLM
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            ü§ñ AI & LLM
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../curriculum/05_transformers_nlp_applications/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    üß† Transformers & NLP Applications
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../curriculum/06_llms_jetson/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    üöÄ Large Language Models on Jetson
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../curriculum/07_nlp_applications_llm_optimization/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    üìö NLP Applications & LLM Optimization
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../curriculum/08_prompt_engineering_langchain_jetson/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ‚úçÔ∏è Prompt Engineering & LangChain
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../curriculum/09_rag_app_langchain_jetson/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    üîé RAG Applications with LangChain
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#technical-background" class="md-nav__link">
    <span class="md-ellipsis">
      Technical Background
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Technical Background">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-is-an-overlay-network" class="md-nav__link">
    <span class="md-ellipsis">
      What is an Overlay Network?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#key-features-of-nebula" class="md-nav__link">
    <span class="md-ellipsis">
      Key Features of Nebula
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#architecture-components" class="md-nav__link">
    <span class="md-ellipsis">
      Architecture Components
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Architecture Components">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-certificate-authority-ca" class="md-nav__link">
    <span class="md-ellipsis">
      1. Certificate Authority (CA)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-lighthouse-nodes" class="md-nav__link">
    <span class="md-ellipsis">
      2. Lighthouse Nodes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-regular-nodes" class="md-nav__link">
    <span class="md-ellipsis">
      3. Regular Nodes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    <span class="md-ellipsis">
      Installation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Installation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#download-nebula" class="md-nav__link">
    <span class="md-ellipsis">
      Download Nebula
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-setup" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration Setup
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuration Setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-create-certificate-authority" class="md-nav__link">
    <span class="md-ellipsis">
      Step 1: Create Certificate Authority
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-generate-node-certificates" class="md-nav__link">
    <span class="md-ellipsis">
      Step 2: Generate Node Certificates
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-create-configuration-files" class="md-nav__link">
    <span class="md-ellipsis">
      Step 3: Create Configuration Files
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Step 3: Create Configuration Files">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lighthouse-configuration-lighthouseyml" class="md-nav__link">
    <span class="md-ellipsis">
      Lighthouse Configuration (lighthouse.yml)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#client-configuration-clientyml" class="md-nav__link">
    <span class="md-ellipsis">
      Client Configuration (client.yml)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#command-line-operations" class="md-nav__link">
    <span class="md-ellipsis">
      Command Line Operations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Command Line Operations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#starting-nebula" class="md-nav__link">
    <span class="md-ellipsis">
      Starting Nebula
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Testing Configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#certificate-management" class="md-nav__link">
    <span class="md-ellipsis">
      Certificate Management
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#network-diagnostics" class="md-nav__link">
    <span class="md-ellipsis">
      Network Diagnostics
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#systemd-service-setup" class="md-nav__link">
    <span class="md-ellipsis">
      Systemd Service Setup
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Systemd Service Setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-service-file" class="md-nav__link">
    <span class="md-ellipsis">
      Create Service File
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enable-and-start-service" class="md-nav__link">
    <span class="md-ellipsis">
      Enable and Start Service
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced Configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Advanced Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#firewall-rules-with-groups" class="md-nav__link">
    <span class="md-ellipsis">
      Firewall Rules with Groups
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multiple-lighthouse-setup" class="md-nav__link">
    <span class="md-ellipsis">
      Multiple Lighthouse Setup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-routing" class="md-nav__link">
    <span class="md-ellipsis">
      Custom Routing
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      Troubleshooting
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#common-issues" class="md-nav__link">
    <span class="md-ellipsis">
      Common Issues
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#debug-commands" class="md-nav__link">
    <span class="md-ellipsis">
      Debug Commands
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#security-best-practices" class="md-nav__link">
    <span class="md-ellipsis">
      Security Best Practices
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sample-use-cases" class="md-nav__link">
    <span class="md-ellipsis">
      Sample Use Cases
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Sample Use Cases">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-remote-office-connection" class="md-nav__link">
    <span class="md-ellipsis">
      1. Remote Office Connection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-developer-access" class="md-nav__link">
    <span class="md-ellipsis">
      2. Developer Access
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-iot-device-network" class="md-nav__link">
    <span class="md-ellipsis">
      3. IoT Device Network
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="nebula-overlay-network-guide">Nebula Overlay Network Guide<a class="headerlink" href="#nebula-overlay-network-guide" title="Permanent link">&para;</a></h1>
<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">&para;</a></h2>
<p>Nebula is a scalable overlay networking tool with a focus on performance, simplicity, and security. It lets you seamlessly connect computers anywhere in the world. Nebula is portable, running on Linux, OSX, Windows, iOS, and Android. It can be used to connect a small number of computers, but is also able to connect tens of thousands of computers.</p>
<h2 id="technical-background">Technical Background<a class="headerlink" href="#technical-background" title="Permanent link">&para;</a></h2>
<h3 id="what-is-an-overlay-network">What is an Overlay Network?<a class="headerlink" href="#what-is-an-overlay-network" title="Permanent link">&para;</a></h3>
<p>An overlay network is a computer network that is layered on top of another network. Nodes in the overlay network are connected by virtual or logical links that correspond to paths, perhaps through many physical links, in the underlying network.</p>
<h3 id="key-features-of-nebula">Key Features of Nebula<a class="headerlink" href="#key-features-of-nebula" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Zero Trust Architecture</strong>: Every connection is authenticated and encrypted</li>
<li><strong>Mesh Networking</strong>: Direct peer-to-peer connections when possible</li>
<li><strong>NAT Traversal</strong>: Works behind firewalls and NATs</li>
<li><strong>Certificate-based Authentication</strong>: Uses X.509 certificates for identity</li>
<li><strong>Lighthouse Discovery</strong>: Centralized discovery with decentralized communication</li>
<li><strong>Cross-platform</strong>: Runs on multiple operating systems</li>
</ul>
<h3 id="architecture-components">Architecture Components<a class="headerlink" href="#architecture-components" title="Permanent link">&para;</a></h3>
<h4 id="1-certificate-authority-ca">1. Certificate Authority (CA)<a class="headerlink" href="#1-certificate-authority-ca" title="Permanent link">&para;</a></h4>
<p>The CA is responsible for:
- Generating and signing certificates for all nodes
- Defining network topology and permissions
- Managing certificate lifecycle</p>
<h4 id="2-lighthouse-nodes">2. Lighthouse Nodes<a class="headerlink" href="#2-lighthouse-nodes" title="Permanent link">&para;</a></h4>
<p>Lighthouses serve as:
- Initial connection points for nodes
- Directory services for peer discovery
- NAT traversal coordination</p>
<h4 id="3-regular-nodes">3. Regular Nodes<a class="headerlink" href="#3-regular-nodes" title="Permanent link">&para;</a></h4>
<p>Regular nodes are:
- End-user devices or servers
- Connect to lighthouses for initial discovery
- Establish direct connections with peers when possible</p>
<h2 id="installation">Installation<a class="headerlink" href="#installation" title="Permanent link">&para;</a></h2>
<h3 id="download-nebula">Download Nebula<a class="headerlink" href="#download-nebula" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Download latest release for Linux</span>
wget<span class="w"> </span>https://github.com/slackhq/nebula/releases/latest/download/nebula-linux-amd64.tar.gz
tar<span class="w"> </span>-xzf<span class="w"> </span>nebula-linux-amd64.tar.gz
sudo<span class="w"> </span>mv<span class="w"> </span>nebula<span class="w"> </span>/usr/local/bin/
sudo<span class="w"> </span>mv<span class="w"> </span>nebula-cert<span class="w"> </span>/usr/local/bin/

<span class="c1"># For macOS</span>
brew<span class="w"> </span>install<span class="w"> </span>nebula

<span class="c1"># For Windows (using chocolatey)</span>
choco<span class="w"> </span>install<span class="w"> </span>nebula
</code></pre></div>
<h2 id="configuration-setup">Configuration Setup<a class="headerlink" href="#configuration-setup" title="Permanent link">&para;</a></h2>
<h3 id="step-1-create-certificate-authority">Step 1: Create Certificate Authority<a class="headerlink" href="#step-1-create-certificate-authority" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Create CA certificate and key</span>
nebula-cert<span class="w"> </span>ca<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;MyCompany Network&quot;</span>

<span class="c1"># This creates:</span>
<span class="c1"># - ca.crt (certificate authority certificate)</span>
<span class="c1"># - ca.key (certificate authority private key)</span>
</code></pre></div>
<h3 id="step-2-generate-node-certificates">Step 2: Generate Node Certificates<a class="headerlink" href="#step-2-generate-node-certificates" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Generate lighthouse certificate</span>
nebula-cert<span class="w"> </span>sign<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;lighthouse1&quot;</span><span class="w"> </span>-ip<span class="w"> </span><span class="s2">&quot;192.168.100.1/24&quot;</span><span class="w"> </span>-ca-crt<span class="w"> </span>ca.crt<span class="w"> </span>-ca-key<span class="w"> </span>ca.key

<span class="c1"># Generate client certificates</span>
nebula-cert<span class="w"> </span>sign<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;laptop&quot;</span><span class="w"> </span>-ip<span class="w"> </span><span class="s2">&quot;192.168.100.10/24&quot;</span><span class="w"> </span>-ca-crt<span class="w"> </span>ca.crt<span class="w"> </span>-ca-key<span class="w"> </span>ca.key
nebula-cert<span class="w"> </span>sign<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;server&quot;</span><span class="w"> </span>-ip<span class="w"> </span><span class="s2">&quot;192.168.100.20/24&quot;</span><span class="w"> </span>-ca-crt<span class="w"> </span>ca.crt<span class="w"> </span>-ca-key<span class="w"> </span>ca.key

<span class="c1"># Generate certificate with groups (for access control)</span>
nebula-cert<span class="w"> </span>sign<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;admin-laptop&quot;</span><span class="w"> </span>-ip<span class="w"> </span><span class="s2">&quot;192.168.100.15/24&quot;</span><span class="w"> </span>-groups<span class="w"> </span><span class="s2">&quot;admin,users&quot;</span><span class="w"> </span>-ca-crt<span class="w"> </span>ca.crt<span class="w"> </span>-ca-key<span class="w"> </span>ca.key
</code></pre></div>
<h3 id="step-3-create-configuration-files">Step 3: Create Configuration Files<a class="headerlink" href="#step-3-create-configuration-files" title="Permanent link">&para;</a></h3>
<h4 id="lighthouse-configuration-lighthouseyml">Lighthouse Configuration (lighthouse.yml)<a class="headerlink" href="#lighthouse-configuration-lighthouseyml" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="nt">pki</span><span class="p">:</span>
<span class="w">  </span><span class="nt">ca</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/etc/nebula/ca.crt</span>
<span class="w">  </span><span class="nt">cert</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/etc/nebula/lighthouse1.crt</span>
<span class="w">  </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/etc/nebula/lighthouse1.key</span>

<span class="nt">static_host_map</span><span class="p">:</span>
<span class="w">  </span><span class="s">&quot;192.168.100.1&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;YOUR_PUBLIC_IP:4242&quot;</span><span class="p p-Indicator">]</span>

<span class="nt">lighthouse</span><span class="p">:</span>
<span class="w">  </span><span class="nt">am_lighthouse</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="nt">serve_dns</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">  </span><span class="nt">interval</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">60</span>
<span class="w">  </span><span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>

<span class="nt">listen</span><span class="p">:</span>
<span class="w">  </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0.0.0</span>
<span class="w">  </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4242</span>

<span class="nt">punchy</span><span class="p">:</span>
<span class="w">  </span><span class="nt">punch</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="nt">respond</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="nt">delay</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1s</span>

<span class="nt">relay</span><span class="p">:</span>
<span class="w">  </span><span class="nt">am_relay</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="nt">use_relays</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>

<span class="nt">tun</span><span class="p">:</span>
<span class="w">  </span><span class="nt">disabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">  </span><span class="nt">dev</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nebula1</span>
<span class="w">  </span><span class="nt">drop_local_broadcast</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">  </span><span class="nt">drop_multicast</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">  </span><span class="nt">tx_queue</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">500</span>
<span class="w">  </span><span class="nt">mtu</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1300</span>

<span class="nt">logging</span><span class="p">:</span>
<span class="w">  </span><span class="nt">level</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">info</span>
<span class="w">  </span><span class="nt">format</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">text</span>

<span class="nt">firewall</span><span class="p">:</span>
<span class="w">  </span><span class="nt">conntrack</span><span class="p">:</span>
<span class="w">    </span><span class="nt">tcp_timeout</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">12m</span>
<span class="w">    </span><span class="nt">udp_timeout</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3m</span>
<span class="w">    </span><span class="nt">default_timeout</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10m</span>
<span class="w">    </span><span class="nt">max_connections</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100000</span>

<span class="w">  </span><span class="nt">outbound</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">any</span>
<span class="w">      </span><span class="nt">proto</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">any</span>
<span class="w">      </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">any</span>

<span class="w">  </span><span class="nt">inbound</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">any</span>
<span class="w">      </span><span class="nt">proto</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">icmp</span>
<span class="w">      </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">any</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">22</span>
<span class="w">      </span><span class="nt">proto</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tcp</span>
<span class="w">      </span><span class="nt">groups</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;admin&quot;</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80,443</span>
<span class="w">      </span><span class="nt">proto</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tcp</span>
<span class="w">      </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">any</span>
</code></pre></div>
<h4 id="client-configuration-clientyml">Client Configuration (client.yml)<a class="headerlink" href="#client-configuration-clientyml" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="nt">pki</span><span class="p">:</span>
<span class="w">  </span><span class="nt">ca</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/etc/nebula/ca.crt</span>
<span class="w">  </span><span class="nt">cert</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/etc/nebula/laptop.crt</span>
<span class="w">  </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/etc/nebula/laptop.key</span>

<span class="nt">static_host_map</span><span class="p">:</span>
<span class="w">  </span><span class="s">&quot;192.168.100.1&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;LIGHTHOUSE_PUBLIC_IP:4242&quot;</span><span class="p p-Indicator">]</span>

<span class="nt">lighthouse</span><span class="p">:</span>
<span class="w">  </span><span class="nt">am_lighthouse</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">  </span><span class="nt">interval</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">60</span>
<span class="w">  </span><span class="nt">hosts</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;192.168.100.1&quot;</span>

<span class="nt">listen</span><span class="p">:</span>
<span class="w">  </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0.0.0</span>
<span class="w">  </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>

<span class="nt">punchy</span><span class="p">:</span>
<span class="w">  </span><span class="nt">punch</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="nt">respond</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="nt">delay</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1s</span>

<span class="nt">relay</span><span class="p">:</span>
<span class="w">  </span><span class="nt">am_relay</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">  </span><span class="nt">use_relays</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="nt">relays</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;192.168.100.1&quot;</span>

<span class="nt">tun</span><span class="p">:</span>
<span class="w">  </span><span class="nt">disabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">  </span><span class="nt">dev</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nebula1</span>
<span class="w">  </span><span class="nt">drop_local_broadcast</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">  </span><span class="nt">drop_multicast</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">  </span><span class="nt">tx_queue</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">500</span>
<span class="w">  </span><span class="nt">mtu</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1300</span>

<span class="nt">logging</span><span class="p">:</span>
<span class="w">  </span><span class="nt">level</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">info</span>
<span class="w">  </span><span class="nt">format</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">text</span>

<span class="nt">firewall</span><span class="p">:</span>
<span class="w">  </span><span class="nt">conntrack</span><span class="p">:</span>
<span class="w">    </span><span class="nt">tcp_timeout</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">12m</span>
<span class="w">    </span><span class="nt">udp_timeout</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3m</span>
<span class="w">    </span><span class="nt">default_timeout</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10m</span>
<span class="w">    </span><span class="nt">max_connections</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100000</span>

<span class="w">  </span><span class="nt">outbound</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">any</span>
<span class="w">      </span><span class="nt">proto</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">any</span>
<span class="w">      </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">any</span>

<span class="w">  </span><span class="nt">inbound</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">any</span>
<span class="w">      </span><span class="nt">proto</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">icmp</span>
<span class="w">      </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">any</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">22</span>
<span class="w">      </span><span class="nt">proto</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tcp</span>
<span class="w">      </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">any</span>
</code></pre></div>
<h2 id="command-line-operations">Command Line Operations<a class="headerlink" href="#command-line-operations" title="Permanent link">&para;</a></h2>
<h3 id="starting-nebula">Starting Nebula<a class="headerlink" href="#starting-nebula" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Start nebula with configuration file</span>
sudo<span class="w"> </span>nebula<span class="w"> </span>-config<span class="w"> </span>/etc/nebula/config.yml

<span class="c1"># Start in background</span>
sudo<span class="w"> </span>nebula<span class="w"> </span>-config<span class="w"> </span>/etc/nebula/config.yml<span class="w"> </span><span class="p">&amp;</span>

<span class="c1"># Start with specific log level</span>
sudo<span class="w"> </span>nebula<span class="w"> </span>-config<span class="w"> </span>/etc/nebula/config.yml<span class="w"> </span>-log-level<span class="w"> </span>debug
</code></pre></div>
<h3 id="testing-configuration">Testing Configuration<a class="headerlink" href="#testing-configuration" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Test configuration file</span>
nebula<span class="w"> </span>-config<span class="w"> </span>/etc/nebula/config.yml<span class="w"> </span>-test

<span class="c1"># Print configuration and exit</span>
nebula<span class="w"> </span>-config<span class="w"> </span>/etc/nebula/config.yml<span class="w"> </span>-print-config
</code></pre></div>
<h3 id="certificate-management">Certificate Management<a class="headerlink" href="#certificate-management" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># View certificate details</span>
nebula-cert<span class="w"> </span>print<span class="w"> </span>-path<span class="w"> </span>lighthouse1.crt

<span class="c1"># Verify certificate against CA</span>
nebula-cert<span class="w"> </span>verify<span class="w"> </span>-ca<span class="w"> </span>ca.crt<span class="w"> </span>-crt<span class="w"> </span>laptop.crt

<span class="c1"># List certificate information</span>
nebula-cert<span class="w"> </span>print<span class="w"> </span>-json<span class="w"> </span>-path<span class="w"> </span>laptop.crt<span class="w"> </span><span class="p">|</span><span class="w"> </span>jq<span class="w"> </span>.
</code></pre></div>
<h3 id="network-diagnostics">Network Diagnostics<a class="headerlink" href="#network-diagnostics" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Check if nebula is running</span>
ps<span class="w"> </span>aux<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>nebula

<span class="c1"># Check nebula interface</span>
ip<span class="w"> </span>addr<span class="w"> </span>show<span class="w"> </span>nebula1

<span class="c1"># Test connectivity</span>
ping<span class="w"> </span><span class="m">192</span>.168.100.1

<span class="c1"># Check routing table</span>
ip<span class="w"> </span>route<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>nebula

<span class="c1"># Monitor nebula logs</span>
sudo<span class="w"> </span>journalctl<span class="w"> </span>-u<span class="w"> </span>nebula<span class="w"> </span>-f
</code></pre></div>
<h2 id="systemd-service-setup">Systemd Service Setup<a class="headerlink" href="#systemd-service-setup" title="Permanent link">&para;</a></h2>
<h3 id="create-service-file">Create Service File<a class="headerlink" href="#create-service-file" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>tee<span class="w"> </span>/etc/systemd/system/nebula.service<span class="w"> </span>&gt;<span class="w"> </span>/dev/null<span class="w"> </span><span class="s">&lt;&lt;EOF</span>
<span class="s">[Unit]</span>
<span class="s">Description=Nebula overlay networking tool</span>
<span class="s">Wants=basic.target</span>
<span class="s">After=basic.target network.target</span>
<span class="s">Before=sshd.service</span>

<span class="s">[Service]</span>
<span class="s">SyslogIdentifier=nebula</span>
<span class="s">ExecReload=/bin/kill -HUP \$MAINPID</span>
<span class="s">ExecStart=/usr/local/bin/nebula -config /etc/nebula/config.yml</span>
<span class="s">Restart=always</span>

<span class="s">[Install]</span>
<span class="s">WantedBy=multi-user.target</span>
<span class="s">EOF</span>
</code></pre></div>
<h3 id="enable-and-start-service">Enable and Start Service<a class="headerlink" href="#enable-and-start-service" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Reload systemd</span>
sudo<span class="w"> </span>systemctl<span class="w"> </span>daemon-reload

<span class="c1"># Enable service</span>
sudo<span class="w"> </span>systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>nebula

<span class="c1"># Start service</span>
sudo<span class="w"> </span>systemctl<span class="w"> </span>start<span class="w"> </span>nebula

<span class="c1"># Check status</span>
sudo<span class="w"> </span>systemctl<span class="w"> </span>status<span class="w"> </span>nebula
</code></pre></div>
<h2 id="advanced-configuration">Advanced Configuration<a class="headerlink" href="#advanced-configuration" title="Permanent link">&para;</a></h2>
<h3 id="firewall-rules-with-groups">Firewall Rules with Groups<a class="headerlink" href="#firewall-rules-with-groups" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nt">firewall</span><span class="p">:</span>
<span class="w">  </span><span class="nt">inbound</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># Allow ICMP from anyone</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">any</span>
<span class="w">      </span><span class="nt">proto</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">icmp</span>
<span class="w">      </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">any</span>

<span class="w">    </span><span class="c1"># SSH access only for admin group</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">22</span>
<span class="w">      </span><span class="nt">proto</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tcp</span>
<span class="w">      </span><span class="nt">groups</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;admin&quot;</span><span class="p p-Indicator">]</span>

<span class="w">    </span><span class="c1"># Web services for specific subnets</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80,443</span>
<span class="w">      </span><span class="nt">proto</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tcp</span>
<span class="w">      </span><span class="nt">cidr</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;192.168.100.0/24&quot;</span>

<span class="w">    </span><span class="c1"># Database access for app servers</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3306,5432</span>
<span class="w">      </span><span class="nt">proto</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tcp</span>
<span class="w">      </span><span class="nt">groups</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;database-clients&quot;</span><span class="p p-Indicator">]</span>
</code></pre></div>
<h3 id="multiple-lighthouse-setup">Multiple Lighthouse Setup<a class="headerlink" href="#multiple-lighthouse-setup" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nt">static_host_map</span><span class="p">:</span>
<span class="w">  </span><span class="s">&quot;192.168.100.1&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;lighthouse1.example.com:4242&quot;</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="s">&quot;192.168.100.2&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;lighthouse2.example.com:4242&quot;</span><span class="p p-Indicator">]</span>

<span class="nt">lighthouse</span><span class="p">:</span>
<span class="w">  </span><span class="nt">hosts</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;192.168.100.1&quot;</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;192.168.100.2&quot;</span>
</code></pre></div>
<h3 id="custom-routing">Custom Routing<a class="headerlink" href="#custom-routing" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Route specific subnets through nebula</span>
<span class="nt">routes</span><span class="p">:</span>
<span class="w">  </span><span class="s">&quot;10.0.0.0/8&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;192.168.100.1&quot;</span>
<span class="w">  </span><span class="s">&quot;172.16.0.0/12&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;192.168.100.2&quot;</span>

<span class="c1"># Unsafe routes (routes to non-nebula networks)</span>
<span class="nt">unsafe_routes</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">route</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10.1.0.0/16&quot;</span>
<span class="w">    </span><span class="nt">via</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;192.168.100.10&quot;</span>
<span class="w">    </span><span class="nt">mtu</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1300</span>
</code></pre></div>
<h2 id="troubleshooting">Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permanent link">&para;</a></h2>
<h3 id="common-issues">Common Issues<a class="headerlink" href="#common-issues" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p><strong>Connection Problems</strong>
   <div class="highlight"><pre><span></span><code><span class="c1"># Check if lighthouse is reachable</span>
nc<span class="w"> </span>-u<span class="w"> </span>LIGHTHOUSE_IP<span class="w"> </span><span class="m">4242</span>

<span class="c1"># Verify certificates</span>
nebula-cert<span class="w"> </span>verify<span class="w"> </span>-ca<span class="w"> </span>ca.crt<span class="w"> </span>-crt<span class="w"> </span>node.crt
</code></pre></div></p>
</li>
<li>
<p><strong>NAT Traversal Issues</strong>
   <div class="highlight"><pre><span></span><code><span class="c1"># Enable punchy mode</span>
punchy:
<span class="w">  </span>punch:<span class="w"> </span><span class="nb">true</span>
<span class="w">  </span>respond:<span class="w"> </span><span class="nb">true</span>
<span class="w">  </span>delay:<span class="w"> </span>1s
</code></pre></div></p>
</li>
<li>
<p><strong>Performance Issues</strong>
   <div class="highlight"><pre><span></span><code><span class="c1"># Adjust MTU</span>
tun:
<span class="w">  </span>mtu:<span class="w"> </span><span class="m">1300</span>

<span class="c1"># Increase buffer sizes</span>
listen:
<span class="w">  </span>read_buffer:<span class="w"> </span><span class="m">10485760</span>
<span class="w">  </span>write_buffer:<span class="w"> </span><span class="m">10485760</span>
</code></pre></div></p>
</li>
</ol>
<h3 id="debug-commands">Debug Commands<a class="headerlink" href="#debug-commands" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Enable debug logging</span>
nebula<span class="w"> </span>-config<span class="w"> </span>config.yml<span class="w"> </span>-log-level<span class="w"> </span>debug

<span class="c1"># Check interface statistics</span>
cat<span class="w"> </span>/proc/net/dev<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>nebula

<span class="c1"># Monitor traffic</span>
sudo<span class="w"> </span>tcpdump<span class="w"> </span>-i<span class="w"> </span>nebula1

<span class="c1"># Check iptables rules</span>
sudo<span class="w"> </span>iptables<span class="w"> </span>-L<span class="w"> </span>-n<span class="w"> </span>-v
</code></pre></div>
<h2 id="security-best-practices">Security Best Practices<a class="headerlink" href="#security-best-practices" title="Permanent link">&para;</a></h2>
<ol>
<li><strong>Certificate Management</strong></li>
<li>Keep CA key secure and offline</li>
<li>Use short certificate lifetimes</li>
<li>
<p>Implement certificate rotation</p>
</li>
<li>
<p><strong>Network Segmentation</strong></p>
</li>
<li>Use groups for access control</li>
<li>Implement least privilege firewall rules</li>
<li>
<p>Separate admin and user networks</p>
</li>
<li>
<p><strong>Monitoring</strong></p>
</li>
<li>Monitor connection logs</li>
<li>Set up alerting for failed connections</li>
<li>Regular security audits</li>
</ol>
<h2 id="sample-use-cases">Sample Use Cases<a class="headerlink" href="#sample-use-cases" title="Permanent link">&para;</a></h2>
<h3 id="1-remote-office-connection">1. Remote Office Connection<a class="headerlink" href="#1-remote-office-connection" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Lighthouse at main office</span>
nebula-cert<span class="w"> </span>sign<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;office-gateway&quot;</span><span class="w"> </span>-ip<span class="w"> </span><span class="s2">&quot;192.168.100.1/24&quot;</span><span class="w"> </span>-groups<span class="w"> </span><span class="s2">&quot;gateway&quot;</span><span class="w"> </span>-ca-crt<span class="w"> </span>ca.crt<span class="w"> </span>-ca-key<span class="w"> </span>ca.key

<span class="c1"># Remote office router</span>
nebula-cert<span class="w"> </span>sign<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;remote-office&quot;</span><span class="w"> </span>-ip<span class="w"> </span><span class="s2">&quot;192.168.100.50/24&quot;</span><span class="w"> </span>-groups<span class="w"> </span><span class="s2">&quot;remote&quot;</span><span class="w"> </span>-ca-crt<span class="w"> </span>ca.crt<span class="w"> </span>-ca-key<span class="w"> </span>ca.key
</code></pre></div>
<h3 id="2-developer-access">2. Developer Access<a class="headerlink" href="#2-developer-access" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Developer laptops</span>
nebula-cert<span class="w"> </span>sign<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;dev-laptop-1&quot;</span><span class="w"> </span>-ip<span class="w"> </span><span class="s2">&quot;192.168.100.101/24&quot;</span><span class="w"> </span>-groups<span class="w"> </span><span class="s2">&quot;developers&quot;</span><span class="w"> </span>-ca-crt<span class="w"> </span>ca.crt<span class="w"> </span>-ca-key<span class="w"> </span>ca.key
nebula-cert<span class="w"> </span>sign<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;dev-laptop-2&quot;</span><span class="w"> </span>-ip<span class="w"> </span><span class="s2">&quot;192.168.100.102/24&quot;</span><span class="w"> </span>-groups<span class="w"> </span><span class="s2">&quot;developers&quot;</span><span class="w"> </span>-ca-crt<span class="w"> </span>ca.crt<span class="w"> </span>-ca-key<span class="w"> </span>ca.key

<span class="c1"># Development servers</span>
nebula-cert<span class="w"> </span>sign<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;dev-server&quot;</span><span class="w"> </span>-ip<span class="w"> </span><span class="s2">&quot;192.168.100.200/24&quot;</span><span class="w"> </span>-groups<span class="w"> </span><span class="s2">&quot;servers,development&quot;</span><span class="w"> </span>-ca-crt<span class="w"> </span>ca.crt<span class="w"> </span>-ca-key<span class="w"> </span>ca.key
</code></pre></div>
<h3 id="3-iot-device-network">3. IoT Device Network<a class="headerlink" href="#3-iot-device-network" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># IoT devices with restricted access</span>
nebula-cert<span class="w"> </span>sign<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;sensor-1&quot;</span><span class="w"> </span>-ip<span class="w"> </span><span class="s2">&quot;192.168.100.201/24&quot;</span><span class="w"> </span>-groups<span class="w"> </span><span class="s2">&quot;iot,sensors&quot;</span><span class="w"> </span>-ca-crt<span class="w"> </span>ca.crt<span class="w"> </span>-ca-key<span class="w"> </span>ca.key
nebula-cert<span class="w"> </span>sign<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;camera-1&quot;</span><span class="w"> </span>-ip<span class="w"> </span><span class="s2">&quot;192.168.100.202/24&quot;</span><span class="w"> </span>-groups<span class="w"> </span><span class="s2">&quot;iot,cameras&quot;</span><span class="w"> </span>-ca-crt<span class="w"> </span>ca.crt<span class="w"> </span>-ca-key<span class="w"> </span>ca.key

<span class="c1"># IoT management server</span>
nebula-cert<span class="w"> </span>sign<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;iot-manager&quot;</span><span class="w"> </span>-ip<span class="w"> </span><span class="s2">&quot;192.168.100.10/24&quot;</span><span class="w"> </span>-groups<span class="w"> </span><span class="s2">&quot;management&quot;</span><span class="w"> </span>-ca-crt<span class="w"> </span>ca.crt<span class="w"> </span>-ca-key<span class="w"> </span>ca.key
</code></pre></div>
<h2 id="conclusion">Conclusion<a class="headerlink" href="#conclusion" title="Permanent link">&para;</a></h2>
<p>Nebula provides a robust, scalable solution for creating secure overlay networks. Its certificate-based authentication, mesh networking capabilities, and flexible firewall rules make it suitable for various use cases from small remote teams to large enterprise deployments.</p>
<p>For more information, visit the <a href="https://github.com/slackhq/nebula">official Nebula documentation</a> and <a href="https://nebula.defined.net/">community resources</a>.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>