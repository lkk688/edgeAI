
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../01a_nvidia_jetson/">
      
      
        <link rel="next" href="../02a_linux_basics/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.9">
    
    
      
        <title>ğŸš€ CUDA Programming on Jetson - Jetson Cyber & AI Summer Camp</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.4af4bdda.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="light-blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#cuda-programming-fundamentals-and-jetson-cuda-examples" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Jetson Cyber &amp; AI Summer Camp" class="md-header__button md-logo" aria-label="Jetson Cyber & AI Summer Camp" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Jetson Cyber & AI Summer Camp
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              ğŸš€ CUDA Programming on Jetson
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Jetson Cyber &amp; AI Summer Camp" class="md-nav__button md-logo" aria-label="Jetson Cyber & AI Summer Camp" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Jetson Cyber & AI Summer Camp
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    ğŸ”° Getting Started with Jetson
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            ğŸ”° Getting Started with Jetson
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../00_sjsujetsontool_guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    âœ… sjsujetsontool Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../00b_sjsujetsontool_cheatsheet/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ğŸ“‹ sjsujetsontool Cheatsheet
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../01a_nvidia_jetson/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ğŸ”§ Introduction to NVIDIA Jetson
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    ğŸš€ CUDA Programming on Jetson
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    ğŸš€ CUDA Programming on Jetson
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-is-cuda" class="md-nav__link">
    <span class="md-ellipsis">
      ğŸ”¹ What is CUDA?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ğŸ”¹ What is CUDA?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#key-cuda-concepts" class="md-nav__link">
    <span class="md-ellipsis">
      Key CUDA Concepts:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuda-memory-hierarchy" class="md-nav__link">
    <span class="md-ellipsis">
      CUDA Memory Hierarchy:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#jetson-orin-nano-cuda-specifications" class="md-nav__link">
    <span class="md-ellipsis">
      ğŸ¯ Jetson Orin Nano CUDA Specifications
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cuda-development-on-jetson" class="md-nav__link">
    <span class="md-ellipsis">
      ğŸ”§ CUDA Development on Jetson
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ğŸ”§ CUDA Development on Jetson">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#run-cuda-samples" class="md-nav__link">
    <span class="md-ellipsis">
      ğŸ§ª Run CUDA Samples
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nvidia-cuda-profiling-tools" class="md-nav__link">
    <span class="md-ellipsis">
      NVIDIA CUDA Profiling Tools
    </span>
  </a>
  
    <nav class="md-nav" aria-label="NVIDIA CUDA Profiling Tools">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-nvidia-nsight-systems-installation-in-container" class="md-nav__link">
    <span class="md-ellipsis">
      1. NVIDIA Nsight Systems - Installation in Container
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-nvidia-nsight-systems-system-wide-profiling" class="md-nav__link">
    <span class="md-ellipsis">
      2. NVIDIA Nsight Systems - System-wide profiling
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-nvidia-nsight-compute-kernel-level-profiling" class="md-nav__link">
    <span class="md-ellipsis">
      3. NVIDIA Nsight Compute - Kernel-level profiling
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cuda-programming-model-on-jetson-orin-nano" class="md-nav__link">
    <span class="md-ellipsis">
      ğŸš€ CUDA Programming Model on Jetson Orin Nano
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#complete-cuda-programming-examples" class="md-nav__link">
    <span class="md-ellipsis">
      ğŸš€ Complete CUDA Programming Examples
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ğŸš€ Complete CUDA Programming Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-vector-addition-example" class="md-nav__link">
    <span class="md-ellipsis">
      1. Vector Addition Example
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-vector-multiplication-example" class="md-nav__link">
    <span class="md-ellipsis">
      2. Vector Multiplication Example
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-matrix-multiplication-example" class="md-nav__link">
    <span class="md-ellipsis">
      3. Matrix Multiplication Example
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-advanced-memory-management-example" class="md-nav__link">
    <span class="md-ellipsis">
      4. Advanced Memory Management Example
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#build-instructions" class="md-nav__link">
    <span class="md-ellipsis">
      ğŸ› ï¸ Build Instructions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ğŸ› ï¸ Build Instructions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-create-makefile" class="md-nav__link">
    <span class="md-ellipsis">
      1. Create Makefile
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-build-commands" class="md-nav__link">
    <span class="md-ellipsis">
      2. Build Commands
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-alternative-cmake-build" class="md-nav__link">
    <span class="md-ellipsis">
      3. Alternative CMake Build
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#profiling-with-nsight-systems" class="md-nav__link">
    <span class="md-ellipsis">
      ğŸ“Š Profiling with Nsight Systems
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ğŸ“Š Profiling with Nsight Systems">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-install-nsight-systems" class="md-nav__link">
    <span class="md-ellipsis">
      1. Install Nsight Systems
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-basic-profiling-commands" class="md-nav__link">
    <span class="md-ellipsis">
      2. Basic Profiling Commands
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-advanced-profiling-options" class="md-nav__link">
    <span class="md-ellipsis">
      3. Advanced Profiling Options
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-analyzing-profile-results" class="md-nav__link">
    <span class="md-ellipsis">
      4. Analyzing Profile Results
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-code-instrumentation-for-better-profiling" class="md-nav__link">
    <span class="md-ellipsis">
      5. Code Instrumentation for Better Profiling
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-performance-optimization-tips" class="md-nav__link">
    <span class="md-ellipsis">
      6. Performance Optimization Tips
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7-automated-profiling-script" class="md-nav__link">
    <span class="md-ellipsis">
      7. Automated Profiling Script
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#performance-benchmarking" class="md-nav__link">
    <span class="md-ellipsis">
      ğŸ¯ Performance Benchmarking
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ğŸ¯ Performance Benchmarking">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#run-and-compare-results" class="md-nav__link">
    <span class="md-ellipsis">
      Run and Compare Results
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    ğŸ§ Linux Fundamentals
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            ğŸ§ Linux Fundamentals
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../02a_linux_basics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ğŸ’¡ Linux OS Basics
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../03a_linux_networking_tools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ğŸŒ Linux Networking Tools
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    ğŸ¤– AI & LLM
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            ğŸ¤– AI & LLM
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../04_deeplearning_cnn/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ğŸ§  Deep Learning & CNN
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../05_transformers_nlp_applications/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ğŸ§  Transformers & NLP Applications
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../06_llms_jetson/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ğŸš€ Large Language Models on Jetson
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../07_nlp_applications_llm_optimization/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ğŸ“š NLP Applications & LLM Optimization
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../08_prompt_engineering_langchain_jetson/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    âœï¸ Prompt Engineering & LangChain
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../09_rag_app_langchain_jetson/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ğŸ” RAG Applications with LangChain
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-is-cuda" class="md-nav__link">
    <span class="md-ellipsis">
      ğŸ”¹ What is CUDA?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ğŸ”¹ What is CUDA?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#key-cuda-concepts" class="md-nav__link">
    <span class="md-ellipsis">
      Key CUDA Concepts:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuda-memory-hierarchy" class="md-nav__link">
    <span class="md-ellipsis">
      CUDA Memory Hierarchy:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#jetson-orin-nano-cuda-specifications" class="md-nav__link">
    <span class="md-ellipsis">
      ğŸ¯ Jetson Orin Nano CUDA Specifications
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cuda-development-on-jetson" class="md-nav__link">
    <span class="md-ellipsis">
      ğŸ”§ CUDA Development on Jetson
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ğŸ”§ CUDA Development on Jetson">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#run-cuda-samples" class="md-nav__link">
    <span class="md-ellipsis">
      ğŸ§ª Run CUDA Samples
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nvidia-cuda-profiling-tools" class="md-nav__link">
    <span class="md-ellipsis">
      NVIDIA CUDA Profiling Tools
    </span>
  </a>
  
    <nav class="md-nav" aria-label="NVIDIA CUDA Profiling Tools">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-nvidia-nsight-systems-installation-in-container" class="md-nav__link">
    <span class="md-ellipsis">
      1. NVIDIA Nsight Systems - Installation in Container
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-nvidia-nsight-systems-system-wide-profiling" class="md-nav__link">
    <span class="md-ellipsis">
      2. NVIDIA Nsight Systems - System-wide profiling
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-nvidia-nsight-compute-kernel-level-profiling" class="md-nav__link">
    <span class="md-ellipsis">
      3. NVIDIA Nsight Compute - Kernel-level profiling
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cuda-programming-model-on-jetson-orin-nano" class="md-nav__link">
    <span class="md-ellipsis">
      ğŸš€ CUDA Programming Model on Jetson Orin Nano
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#complete-cuda-programming-examples" class="md-nav__link">
    <span class="md-ellipsis">
      ğŸš€ Complete CUDA Programming Examples
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ğŸš€ Complete CUDA Programming Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-vector-addition-example" class="md-nav__link">
    <span class="md-ellipsis">
      1. Vector Addition Example
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-vector-multiplication-example" class="md-nav__link">
    <span class="md-ellipsis">
      2. Vector Multiplication Example
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-matrix-multiplication-example" class="md-nav__link">
    <span class="md-ellipsis">
      3. Matrix Multiplication Example
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-advanced-memory-management-example" class="md-nav__link">
    <span class="md-ellipsis">
      4. Advanced Memory Management Example
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#build-instructions" class="md-nav__link">
    <span class="md-ellipsis">
      ğŸ› ï¸ Build Instructions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ğŸ› ï¸ Build Instructions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-create-makefile" class="md-nav__link">
    <span class="md-ellipsis">
      1. Create Makefile
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-build-commands" class="md-nav__link">
    <span class="md-ellipsis">
      2. Build Commands
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-alternative-cmake-build" class="md-nav__link">
    <span class="md-ellipsis">
      3. Alternative CMake Build
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#profiling-with-nsight-systems" class="md-nav__link">
    <span class="md-ellipsis">
      ğŸ“Š Profiling with Nsight Systems
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ğŸ“Š Profiling with Nsight Systems">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-install-nsight-systems" class="md-nav__link">
    <span class="md-ellipsis">
      1. Install Nsight Systems
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-basic-profiling-commands" class="md-nav__link">
    <span class="md-ellipsis">
      2. Basic Profiling Commands
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-advanced-profiling-options" class="md-nav__link">
    <span class="md-ellipsis">
      3. Advanced Profiling Options
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-analyzing-profile-results" class="md-nav__link">
    <span class="md-ellipsis">
      4. Analyzing Profile Results
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-code-instrumentation-for-better-profiling" class="md-nav__link">
    <span class="md-ellipsis">
      5. Code Instrumentation for Better Profiling
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-performance-optimization-tips" class="md-nav__link">
    <span class="md-ellipsis">
      6. Performance Optimization Tips
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7-automated-profiling-script" class="md-nav__link">
    <span class="md-ellipsis">
      7. Automated Profiling Script
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#performance-benchmarking" class="md-nav__link">
    <span class="md-ellipsis">
      ğŸ¯ Performance Benchmarking
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ğŸ¯ Performance Benchmarking">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#run-and-compare-results" class="md-nav__link">
    <span class="md-ellipsis">
      Run and Compare Results
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="cuda-programming-fundamentals-and-jetson-cuda-examples">ğŸ§  CUDA Programming Fundamentals and Jetson CUDA examples<a class="headerlink" href="#cuda-programming-fundamentals-and-jetson-cuda-examples" title="Permanent link">&para;</a></h1>
<p><strong>Author:</strong> Dr. Kaikai Liu, Ph.D.<br />
<strong>Position:</strong> Associate Professor, Computer Engineering<br />
<strong>Institution:</strong> San Jose State University<br />
<strong>Contact:</strong> <a href="mailto:kaikai.liu@sjsu.edu">kaikai.liu@sjsu.edu</a></p>
<h2 id="what-is-cuda">ğŸ”¹ What is CUDA?<a class="headerlink" href="#what-is-cuda" title="Permanent link">&para;</a></h2>
<p><strong>CUDA (Compute Unified Device Architecture)</strong> is NVIDIA's parallel computing platform and programming model that enables developers to harness GPU power for general-purpose computing. Unlike traditional CPU programming, CUDA allows you to write programs that execute thousands of threads simultaneously on the GPU.</p>
<h3 id="key-cuda-concepts">Key CUDA Concepts:<a class="headerlink" href="#key-cuda-concepts" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Concept</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Kernel</strong></td>
<td>Function that runs on GPU</td>
<td><code>__global__ void add_vectors(float* a, float* b, float* c)</code></td>
</tr>
<tr>
<td><strong>Thread</strong></td>
<td>Basic execution unit</td>
<td>Each thread processes one array element</td>
</tr>
<tr>
<td><strong>Block</strong></td>
<td>Group of threads (up to 1024)</td>
<td>256 threads per block</td>
</tr>
<tr>
<td><strong>Grid</strong></td>
<td>Collection of blocks</td>
<td>1000 blocks in a grid</td>
</tr>
<tr>
<td><strong>Warp</strong></td>
<td>32 threads executed together</td>
<td>Hardware scheduling unit</td>
</tr>
</tbody>
</table>
<h3 id="cuda-memory-hierarchy">CUDA Memory Hierarchy:<a class="headerlink" href="#cuda-memory-hierarchy" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Global Memory              â”‚  â† Largest, slowest (LPDDR5)
â”‚                (8GB)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚            L2 Cache (2MB)               â”‚  â† Shared across SMs
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  SM 0    â”‚  SM 1    â”‚  ...  â”‚  SM 15   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”  â”‚ â”Œâ”€â”€â”€â”€â”€â”  â”‚       â”‚ â”Œâ”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚L1/  â”‚  â”‚ â”‚L1/  â”‚  â”‚       â”‚ â”‚L1/  â”‚  â”‚  â† Fast, per-SM
â”‚ â”‚Shr  â”‚  â”‚ â”‚Shr  â”‚  â”‚       â”‚ â”‚Shr  â”‚  â”‚
â”‚ â”‚64KB â”‚  â”‚ â”‚64KB â”‚  â”‚       â”‚ â”‚64KB â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”˜  â”‚ â””â”€â”€â”€â”€â”€â”˜  â”‚       â”‚ â””â”€â”€â”€â”€â”€â”˜  â”‚
â”‚ Regs     â”‚ Regs     â”‚       â”‚ Regs     â”‚  â† Fastest, per-thread
â”‚ 64K      â”‚ 64K      â”‚       â”‚ 64K      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>
<h2 id="jetson-orin-nano-cuda-specifications">ğŸ¯ Jetson Orin Nano CUDA Specifications<a class="headerlink" href="#jetson-orin-nano-cuda-specifications" title="Permanent link">&para;</a></h2>
<table>
<thead>
<tr>
<th>Feature</th>
<th>Jetson Orin Nano</th>
<th>Desktop RTX 4060</th>
<th>Data Center A100</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>CUDA Cores</strong></td>
<td>512</td>
<td>3072</td>
<td>6912</td>
</tr>
<tr>
<td><strong>Tensor Cores</strong></td>
<td>16 (3rd Gen)</td>
<td>128 (3rd Gen)</td>
<td>432 (3rd Gen)</td>
</tr>
<tr>
<td><strong>SMs</strong></td>
<td>16</td>
<td>24</td>
<td>108</td>
</tr>
<tr>
<td><strong>Memory</strong></td>
<td>8GB LPDDR5</td>
<td>8GB GDDR6</td>
<td>40/80GB HBM2e</td>
</tr>
<tr>
<td><strong>Memory Bandwidth</strong></td>
<td>102 GB/s</td>
<td>272 GB/s</td>
<td>1555 GB/s</td>
</tr>
<tr>
<td><strong>Power</strong></td>
<td>7-25W</td>
<td>115W</td>
<td>400W</td>
</tr>
<tr>
<td><strong>CUDA Compute</strong></td>
<td>8.7</td>
<td>8.9</td>
<td>8.0</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>Key Insight</strong>: Jetson Orin Nano provides excellent CUDA capability per watt, making it ideal for edge AI applications where power efficiency is critical.</p>
</blockquote>
<h2 id="cuda-development-on-jetson">ğŸ”§ CUDA Development on Jetson<a class="headerlink" href="#cuda-development-on-jetson" title="Permanent link">&para;</a></h2>
<p>Jetson supports native CUDA (C/C++) for fine-grained control. Ideal for performance-critical compute kernels.</p>
<p><strong>NVIDIA CUDA Compiler (NVCC)</strong>: <a href="https://docs.nvidia.com/cuda/cuda-compiler-driver-nvcc/">NVCC</a> is a compiler driver provided by NVIDIA for compiling CUDA C/C++ programs. It's a toolchain that manages the compilation process, generating binary executables containing both host (CPU) code and device (GPU) code.</p>
<p><strong>Install CUDA nvcc:</strong> Even though JetPack 6.2 (L4T 36.4.3) includes CUDA 12.6, the nvcc command is not installed by default on Jetson devices starting from JetPack 6.x. CUDA is split into host and device components. On Jetson, only the runtime components of CUDA are installed by default (for deploying and running models). The full CUDA toolkit (including nvcc, compiler, samples, etc.) is now optional. </p>
<p>We already installed the full CUDA toolkit in our provided Jetson image. You can check the <code>nvcc</code> command by running:
<div class="highlight"><pre><span></span><code>sjsujetson@sjsujetson-01:~$<span class="w"> </span>nvcc<span class="w"> </span>--version
nvcc:<span class="w"> </span>NVIDIA<span class="w"> </span><span class="o">(</span>R<span class="o">)</span><span class="w"> </span>Cuda<span class="w"> </span>compiler<span class="w"> </span>driver
Copyright<span class="w"> </span><span class="o">(</span>c<span class="o">)</span><span class="w"> </span><span class="m">2005</span>-2024<span class="w"> </span>NVIDIA<span class="w"> </span>Corporation
Built<span class="w"> </span>on<span class="w"> </span>Wed_Aug_14_10:14:07_PDT_2024
Cuda<span class="w"> </span>compilation<span class="w"> </span>tools,<span class="w"> </span>release<span class="w"> </span><span class="m">12</span>.6,<span class="w"> </span>V12.6.68
Build<span class="w"> </span>cuda_12.6.r12.6/compiler.34714021_0
</code></pre></div>
The following CUDA 12.6 path are already added to the <code>~/.bashrc</code>
<div class="highlight"><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span>/usr/local/cuda-12.6/bin:<span class="nv">$PATH</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span>/usr/local/cuda-12.6/lib64:<span class="nv">$LD_LIBRARY_PATH</span>
</code></pre></div></p>
<h3 id="run-cuda-samples">ğŸ§ª Run CUDA Samples<a class="headerlink" href="#run-cuda-samples" title="Permanent link">&para;</a></h3>
<p>To build cuda samples, we need to use the new version of cmake (already downloaded in <code>/Developer</code>)
<div class="highlight"><pre><span></span><code>sjsujetson@sjsujetson-01:~$<span class="w"> </span><span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span>/Developer/cmake-3.28.3-linux-aarch64/bin:<span class="nv">$PATH</span>
sjsujetson@sjsujetson-01:~$<span class="w"> </span>cmake<span class="w"> </span>--version
cmake<span class="w"> </span>version<span class="w"> </span><span class="m">3</span>.28.3

CMake<span class="w"> </span>suite<span class="w"> </span>maintained<span class="w"> </span>and<span class="w"> </span>supported<span class="w"> </span>by<span class="w"> </span>Kitware<span class="w"> </span><span class="o">(</span>kitware.com/cmake<span class="o">)</span>.
</code></pre></div>
<code>cuda-samples</code> folder is also available in the <code>/Developer</code> folder, you can run cudda samples inside the build folder:
<div class="highlight"><pre><span></span><code>sjsujetson@sjsujetson-01:/Developer/cuda-samples/build$<span class="w"> </span>./0_Introduction/vectorAdd/vectorAdd
<span class="o">[</span>Vector<span class="w"> </span>addition<span class="w"> </span>of<span class="w"> </span><span class="m">50000</span><span class="w"> </span>elements<span class="o">]</span>
Copy<span class="w"> </span>input<span class="w"> </span>data<span class="w"> </span>from<span class="w"> </span>the<span class="w"> </span>host<span class="w"> </span>memory<span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span>CUDA<span class="w"> </span>device
CUDA<span class="w"> </span>kernel<span class="w"> </span>launch<span class="w"> </span>with<span class="w"> </span><span class="m">196</span><span class="w"> </span>blocks<span class="w"> </span>of<span class="w"> </span><span class="m">256</span><span class="w"> </span>threads
Copy<span class="w"> </span>output<span class="w"> </span>data<span class="w"> </span>from<span class="w"> </span>the<span class="w"> </span>CUDA<span class="w"> </span>device<span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span>host<span class="w"> </span>memory
Test<span class="w"> </span>PASSED
Done
sjsujetson@sjsujetson-01:/Developer/cuda-samples/build$<span class="w"> </span>./1_Utilities/deviceQuery/deviceQuery
...
<span class="nv">Result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>PASS
sjsujetson@sjsujetson-01:/Developer/cuda-samples/build$<span class="w"> </span>./0_Introduction/matrixMul/matrixMul
sjsujetson@sjsujetson-01:/Developer/cuda-samples/build$<span class="w"> </span>./0_Introduction/asyncAPI/asyncAPI<span class="w"> </span><span class="c1">#Demonstrates overlapping data transfers and kernel execution using CUDA streams. </span>
sjsujetson@sjsujetson-01:/Developer/cuda-samples/build$<span class="w"> </span>./0_Introduction/UnifiedMemoryStreams/UnifiedMemoryStreams<span class="w"> </span><span class="c1">#Demonstrates using Unified Memory with async memory prefetching</span>
sjsujetson@sjsujetson-01:/Developer/cuda-samples/build$<span class="w"> </span>./2_Concepts_and_Techniques/convolutionTexture/convolutionTexture<span class="w"> </span><span class="c1">#Demonstrates using CUDAâ€™s texture memory to do efficient image convolution.</span>
sjsujetson@sjsujetson-01:/Developer/cuda-samples/build$<span class="w"> </span>./2_Concepts_and_Techniques/histogram/histogram<span class="w"> </span><span class="c1">#Computes histograms with/without shared memory. </span>
</code></pre></div></p>
<p>If you made changes to the sample code, and want to rebuild it, you can use
<div class="highlight"><pre><span></span><code>sjsujetson@sjsujetson-01:/Developer/cuda-samples/build$<span class="w"> </span>cmake<span class="w"> </span>../Samples<span class="w"> </span>-DCMAKE_CUDA_ARCHITECTURES<span class="o">=</span><span class="s2">&quot;72;87&quot;</span>
--<span class="w"> </span>Configuring<span class="w"> </span><span class="k">done</span><span class="w"> </span><span class="o">(</span><span class="m">14</span>.4s<span class="o">)</span>
--<span class="w"> </span>Generating<span class="w"> </span><span class="k">done</span><span class="w"> </span><span class="o">(</span><span class="m">0</span>.7s<span class="o">)</span>
--<span class="w"> </span>Build<span class="w"> </span>files<span class="w"> </span>have<span class="w"> </span>been<span class="w"> </span>written<span class="w"> </span>to:<span class="w"> </span>/Developer/cuda-samples/build
sjsujetson@sjsujetson-01:/Developer/cuda-samples/build$<span class="w"> </span>make<span class="w"> </span>-j<span class="k">$(</span>nproc<span class="k">)</span>
</code></pre></div>
CMAKE_CUDA_ARCHITECTURES 72 and 87 is for Jetson Xavier NX and Orin</p>
<p>You can get the cuda architecture from 
<div class="highlight"><pre><span></span><code>deviceQuery<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="s2">&quot;CUDA Capability&quot;</span>
<span class="w">  </span>CUDA<span class="w"> </span>Capability<span class="w"> </span>Major/Minor<span class="w"> </span>version<span class="w"> </span>number:<span class="w">    </span><span class="m">8</span>.7
</code></pre></div></p>
<h3 id="nvidia-cuda-profiling-tools">NVIDIA CUDA Profiling Tools<a class="headerlink" href="#nvidia-cuda-profiling-tools" title="Permanent link">&para;</a></h3>
<h4 id="1-nvidia-nsight-systems-installation-in-container">1. <strong>NVIDIA Nsight Systems</strong> - Installation in Container<a class="headerlink" href="#1-nvidia-nsight-systems-installation-in-container" title="Permanent link">&para;</a></h4>
<p>NVIDIA Nsight installation: Nsight system is expected to be install manually if required. Please run below within the container:
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sjsujetsontool<span class="w"> </span>shell<span class="w"> </span><span class="c1">#enter into container</span>
root@sjsujetson-01:/Developer/cuda-samples/build#<span class="w"> </span>apt<span class="w"> </span>update
<span class="se">\</span>
<span class="c1">#download the nsight package from https://repo.download.nvidia.com/jetson/#Jetpack%206.1/6.2/6.2.1</span>
root@sjsujetson-01:/Developer#<span class="w"> </span>wget<span class="w"> </span>https://repo.download.nvidia.com/jetson/common/pool/main/n/nsight-systems-2024.5.4/nsight-systems-2024.5.4_2024.5.4.34-245434855735v0_arm64.deb
<span class="c1">#inspect the package</span>
root@sjsujetson-01:/Developer#<span class="w"> </span>dpkg<span class="w"> </span>-c<span class="w"> </span>nsight-systems-2024.5.4_2024.5.4.34-245434855735v0_arm64.deb
root@sjsujetson-01:/Developer#<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>./nsight-systems-2024.5.4_2024.5.4.34-245434855735v0_arm64.deb
root@sjsujetson-01:/Developer#<span class="w"> </span>nsys<span class="w"> </span>--version
NVIDIA<span class="w"> </span>Nsight<span class="w"> </span>Systems<span class="w"> </span>version<span class="w"> </span><span class="m">2024</span>.5.4.34-245434855735v0
root@sjsujetson-01:/Developer#<span class="w"> </span>which<span class="w"> </span>nsys
/usr/local/bin/nsys
</code></pre></div></p>
<p><a href="https://docs.nvidia.com/nsight-systems/InstallationGuide/index.html">nsight-systems installation</a></p>
<h4 id="2-nvidia-nsight-systems-system-wide-profiling">2. <strong>NVIDIA Nsight Systems</strong> - System-wide profiling<a class="headerlink" href="#2-nvidia-nsight-systems-system-wide-profiling" title="Permanent link">&para;</a></h4>
<p><div class="highlight"><pre><span></span><code><span class="c1"># Profile a CUDA application</span>
root@sjsujetson-01:/Developer/cuda-samples/build#<span class="w"> </span>nsys<span class="w"> </span>profile<span class="w"> </span>--stats<span class="o">=</span><span class="nb">true</span><span class="w"> </span>./0_Introduction/vectorAdd/vectorAdd
....
Generated:
<span class="w">    </span>/Developer/cuda-samples/build/report2.nsys-rep
<span class="w">    </span>/Developer/cuda-samples/build/report2.sqlite
</code></pre></div>
<code>report2.nsys-rep</code> is the Main profiling report (for Nsight Systems UI or CLI import/export); <code>report2.sqlite</code> is the Internal database format (used for CLI stats and custom scripts)</p>
<p>If you have Nsight Systems GUI installed on your host PC (x86) or remote desktop session, you can Open GUI on Host Machine: <code>nsys-ui /path/to/report2.nsys-rep</code>.</p>
<p>You can also get high-level summaries without the GUI:
<div class="highlight"><pre><span></span><code>root@sjsujetson-01:/Developer/cuda-samples/build#<span class="w"> </span>nsys<span class="w"> </span>stats<span class="w"> </span>--force-export<span class="o">=</span><span class="nb">true</span><span class="w"> </span>/Developer/cuda-samples/build/report2.nsys-rep
Generating<span class="w"> </span>SQLite<span class="w"> </span>file<span class="w"> </span>/Developer/cuda-samples/build/report2.sqlite<span class="w"> </span>from<span class="w"> </span>/Developer/cuda-samples/build/report2.nsys-rep
Processing<span class="w"> </span><span class="o">[</span>/Developer/cuda-samples/build/report2.sqlite<span class="o">]</span><span class="w"> </span>with<span class="w"> </span><span class="o">[</span>/opt/nvidia/nsight-systems/2024.5.4/host-linux-armv8/reports/nvtx_sum.py<span class="o">]</span>...<span class="w"> </span>
<span class="w"> </span>**<span class="w"> </span>OS<span class="w"> </span>Runtime<span class="w"> </span>Summary<span class="w"> </span><span class="o">(</span>osrt_sum<span class="o">)</span>:
<span class="w"> </span>**<span class="w"> </span>CUDA<span class="w"> </span>API<span class="w"> </span>Summary<span class="w"> </span><span class="o">(</span>cuda_api_sum<span class="o">)</span>:
<span class="w"> </span>**<span class="w"> </span>CUDA<span class="w"> </span>GPU<span class="w"> </span>Kernel<span class="w"> </span>Summary<span class="w"> </span><span class="o">(</span>cuda_gpu_kern_sum<span class="o">)</span>:
<span class="w"> </span>**<span class="w"> </span>CUDA<span class="w"> </span>GPU<span class="w"> </span>MemOps<span class="w"> </span>Summary<span class="w"> </span><span class="o">(</span>by<span class="w"> </span>Time<span class="o">)</span><span class="w"> </span><span class="o">(</span>cuda_gpu_mem_time_sum<span class="o">)</span>:
<span class="w"> </span>**<span class="w"> </span>CUDA<span class="w"> </span>GPU<span class="w"> </span>MemOps<span class="w"> </span>Summary<span class="w"> </span><span class="o">(</span>by<span class="w"> </span>Size<span class="o">)</span><span class="w"> </span><span class="o">(</span>cuda_gpu_mem_size_sum<span class="o">)</span>:
</code></pre></div>
Or export to CSV:
<div class="highlight"><pre><span></span><code>root@sjsujetson-01:/Developer/cuda-samples/build#<span class="w"> </span>nsys<span class="w"> </span>stats<span class="w"> </span>--format<span class="w"> </span>csv<span class="w"> </span>--output<span class="w"> </span>report2_summary<span class="w"> </span>--force-export<span class="o">=</span><span class="nb">true</span><span class="w"> </span>/Developer/cuda-samples/build/report2.nsys-rep
root@sjsujetson-01:/Developer/cuda-samples/build#<span class="w"> </span>ls<span class="w"> </span>*.csv
report2_summary_cuda_api_sum.csv
report2_summary_cuda_gpu_kern_sum.csv
report2_summary_cuda_gpu_mem_size_sum.csv
report2_summary_cuda_gpu_mem_time_sum.csv
report2_summary_dx11_pix_sum.csv
report2_summary_dx12_gpu_marker_sum.csv
report2_summary_dx12_pix_sum.csv
report2_summary_nvtx_sum.csv
report2_summary_openacc_sum.csv
report2_summary_opengl_khr_gpu_range_sum.csv
report2_summary_opengl_khr_range_sum.csv
report2_summary_openmp_sum.csv
report2_summary_osrt_sum.csv
report2_summary_syscall_sum.csv
report2_summary_um_cpu_page_faults_sum.csv
report2_summary_um_sum.csv
report2_summary_um_total_sum.csv
report2_summary_vulkan_gpu_marker_sum.csv
report2_summary_vulkan_marker_sum.csv
report2_summary_wddm_queue_sum.csv
</code></pre></div></p>
<p>Generate timeline view
<div class="highlight"><pre><span></span><code>root@sjsujetson-01:/Developer/cuda-samples/build#<span class="w"> </span>nsys<span class="w"> </span>profile<span class="w"> </span>-o<span class="w"> </span>my_profile<span class="w"> </span>./0_Introduction/vectorAdd/vectorAdd
Collecting<span class="w"> </span>data...
<span class="o">[</span>Vector<span class="w"> </span>addition<span class="w"> </span>of<span class="w"> </span><span class="m">50000</span><span class="w"> </span>elements<span class="o">]</span>
Copy<span class="w"> </span>input<span class="w"> </span>data<span class="w"> </span>from<span class="w"> </span>the<span class="w"> </span>host<span class="w"> </span>memory<span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span>CUDA<span class="w"> </span>device
CUDA<span class="w"> </span>kernel<span class="w"> </span>launch<span class="w"> </span>with<span class="w"> </span><span class="m">196</span><span class="w"> </span>blocks<span class="w"> </span>of<span class="w"> </span><span class="m">256</span><span class="w"> </span>threads
Copy<span class="w"> </span>output<span class="w"> </span>data<span class="w"> </span>from<span class="w"> </span>the<span class="w"> </span>CUDA<span class="w"> </span>device<span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span>host<span class="w"> </span>memory
Test<span class="w"> </span>PASSED
Done
Generating<span class="w"> </span><span class="s1">&#39;/tmp/nsys-report-d475.qdstrm&#39;</span>
<span class="o">[</span><span class="m">1</span>/1<span class="o">]</span><span class="w"> </span><span class="o">[========================</span><span class="m">100</span>%<span class="o">]</span><span class="w"> </span>my_profile.nsys-rep
Generated:
<span class="w">    </span>/Developer/cuda-samples/build/my_profile.nsys-rep
</code></pre></div>
Copy the .nsys-rep file from Jetson to your PC and open with Nsight Systems UI <code>nsys-ui</code></p>
<h4 id="3-nvidia-nsight-compute-kernel-level-profiling">3. <strong>NVIDIA Nsight Compute</strong> - Kernel-level profiling<a class="headerlink" href="#3-nvidia-nsight-compute-kernel-level-profiling" title="Permanent link">&para;</a></h4>
<p>Install Nvidia Nsight Compute, ncu = Nsight Compute CLI profiler for GPU kernel-level profiling (e.g., occupancy, memory throughput, instruction-level analysis). Itâ€™s part of the Nsight Compute package, separate from nsys (Nsight Systems).
<div class="highlight"><pre><span></span><code>root@sjsujetson-01:/Developer#<span class="w"> </span>wget<span class="w"> </span>https://repo.download.nvidia.com/jetson/dgpu-rm/pool/main/n/nsight-compute/nsight-compute-2024.3.1_2024.3.1.2-1_arm64.deb
root@sjsujetson-01:/Developer#<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>./nsight-compute-2024.3.1_2024.3.1.2-1_arm64.deb
root@sjsujetson-01:/Developer#<span class="w"> </span>ls<span class="w"> </span>/opt/nvidia/nsight-compute/2024.3.1/
docs<span class="w">  </span>extras<span class="w">  </span>host<span class="w">  </span>ncu<span class="w">  </span>ncu-ui<span class="w">  </span>sections<span class="w">  </span>target
root@sjsujetson-01:/Developer#<span class="w"> </span><span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span>/opt/nvidia/nsight-compute/2024.3.1:<span class="nv">$PATH</span>
root@sjsujetson-01:/Developer#<span class="w"> </span>ncu<span class="w"> </span>--version
NVIDIA<span class="w"> </span><span class="o">(</span>R<span class="o">)</span><span class="w"> </span>Nsight<span class="w"> </span>Compute<span class="w"> </span>Command<span class="w"> </span>Line<span class="w"> </span>Profiler
Copyright<span class="w"> </span><span class="o">(</span>c<span class="o">)</span><span class="w"> </span><span class="m">2018</span>-2024<span class="w"> </span>NVIDIA<span class="w"> </span>Corporation
Version<span class="w"> </span><span class="m">2024</span>.3.1.0<span class="w"> </span><span class="o">(</span>build<span class="w"> </span><span class="m">34702747</span><span class="o">)</span><span class="w"> </span><span class="o">(</span>public-release<span class="o">)</span>
</code></pre></div>
Rebuild CUDA sample with debug=1 (<code>make SMS="all" debug=1</code>), then run the following
<div class="highlight"><pre><span></span><code><span class="c1"># Detailed kernel analysis</span>
root@sjsujetson-01:/Developer/cuda-samples/build#<span class="w"> </span>ncu<span class="w"> </span>--set<span class="w"> </span>full<span class="w"> </span>./0_Introduction/vectorAdd/vectorAdd
<span class="c1"># Memory throughput analysis</span>
ncu<span class="w"> </span>--metrics<span class="w"> </span>dram__throughput.avg.pct_of_peak_sustained_elapsed<span class="w"> </span>./0_Introduction/vectorAdd/vectorAdd
</code></pre></div></p>
<h2 id="cuda-programming-model-on-jetson-orin-nano">ğŸš€ CUDA Programming Model on Jetson Orin Nano<a class="headerlink" href="#cuda-programming-model-on-jetson-orin-nano" title="Permanent link">&para;</a></h2>
<h2 id="complete-cuda-programming-examples">ğŸš€ Complete CUDA Programming Examples<a class="headerlink" href="#complete-cuda-programming-examples" title="Permanent link">&para;</a></h2>
<h3 id="1-vector-addition-example">1. Vector Addition Example<a class="headerlink" href="#1-vector-addition-example" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">#create vector_add.cu - Complete CUDA Vector Addition Example</span>
root@sjsujetson-01:/Developer/mycuda_samples#<span class="w"> </span>nano<span class="w"> </span>vector_add.cu
root@sjsujetson-01:/Developer/mycuda_samples#<span class="w"> </span>nvcc<span class="w"> </span>-o<span class="w"> </span>vector_add<span class="w"> </span>vector_add.cu<span class="w"> </span>-arch<span class="o">=</span>sm_87
root@sjsujetson-01:/Developer/mycuda_samples#<span class="w"> </span>ls
vector_add<span class="w">  </span>vector_add.cu<span class="w">  </span>vector_multiply.cu
root@sjsujetson-01:/Developer/mycuda_samples#<span class="w"> </span>./vector_add<span class="w"> </span>
Vector<span class="w"> </span>addition<span class="w"> </span>completed<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="m">72848</span><span class="w"> </span>microseconds
Result:<span class="w"> </span>PASSED
</code></pre></div>
<h3 id="2-vector-multiplication-example">2. Vector Multiplication Example<a class="headerlink" href="#2-vector-multiplication-example" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># add vector_multiply.cu - Element-wise Vector Multiplication</span>
root@sjsujetson-01:/Developer/mycuda_samples#<span class="w"> </span>nvcc<span class="w"> </span>-o<span class="w"> </span>vector_multiply<span class="w"> </span>vector_multiply.cu<span class="w"> </span>-arch<span class="o">=</span>sm_87
root@sjsujetson-01:/Developer/mycuda_samples#<span class="w"> </span>./vector_multiply<span class="w"> </span>
Result:<span class="w"> </span>PASSED
</code></pre></div>
<h3 id="3-matrix-multiplication-example">3. Matrix Multiplication Example<a class="headerlink" href="#3-matrix-multiplication-example" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">#create matrix_multiply.cu - CUDA Matrix Multiplication</span>
root@sjsujetson-01:/Developer/mycuda_samples#<span class="w"> </span>nano<span class="w"> </span>matrix_multiply.cu
root@sjsujetson-01:/Developer/mycuda_samples#<span class="w"> </span>nvcc<span class="w"> </span>-O2<span class="w"> </span>-lineinfo<span class="w"> </span>-arch<span class="o">=</span>sm_87<span class="w"> </span>-o<span class="w"> </span>matrix_multiply<span class="w"> </span>matrix_multiply.cu
./matrix_multiply
Result:<span class="w"> </span>PASSED
</code></pre></div>
<h3 id="4-advanced-memory-management-example">4. Advanced Memory Management Example<a class="headerlink" href="#4-advanced-memory-management-example" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># create memory_management.cu - Advanced CUDA Memory Management</span>
root@sjsujetson-01:/Developer/mycuda_samples#<span class="w"> </span>nvcc<span class="w"> </span>-O2<span class="w"> </span>-lineinfo<span class="w"> </span>-arch<span class="o">=</span>sm_87<span class="w"> </span>-o<span class="w"> </span>memory_management<span class="w"> </span>memory_management.cu
</code></pre></div>
<h2 id="build-instructions">ğŸ› ï¸ Build Instructions<a class="headerlink" href="#build-instructions" title="Permanent link">&para;</a></h2>
<h3 id="1-create-makefile">1. Create Makefile<a class="headerlink" href="#1-create-makefile" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c"># Makefile for CUDA examples</span>
<span class="nv">NVCC</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>nvcc
<span class="nv">CUDA_FLAGS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>-std<span class="o">=</span>c++11<span class="w"> </span>-O3<span class="w"> </span>-arch<span class="o">=</span>sm_87<span class="w">  </span><span class="c1"># sm_87 for Jetson Orin, adjust for your device</span>
<span class="nv">CXX_FLAGS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>-std<span class="o">=</span>c++11<span class="w"> </span>-O3

<span class="c"># Targets</span>
<span class="nf">all</span><span class="o">:</span><span class="w"> </span><span class="n">vector_add</span> <span class="n">vector_multiply</span> <span class="n">matrix_multiply</span> <span class="n">memory_demo</span>

<span class="nf">vector_add</span><span class="o">:</span><span class="w"> </span><span class="n">vector_add</span>.<span class="n">cu</span>
<span class="w">    </span><span class="k">$(</span>NVCC<span class="k">)</span><span class="w"> </span><span class="k">$(</span>CUDA_FLAGS<span class="k">)</span><span class="w"> </span>-o<span class="w"> </span>vector_add<span class="w"> </span>vector_add.cu

<span class="nf">vector_multiply</span><span class="o">:</span><span class="w"> </span><span class="n">vector_multiply</span>.<span class="n">cu</span>
<span class="w">    </span><span class="k">$(</span>NVCC<span class="k">)</span><span class="w"> </span><span class="k">$(</span>CUDA_FLAGS<span class="k">)</span><span class="w"> </span>-o<span class="w"> </span>vector_multiply<span class="w"> </span>vector_multiply.cu

<span class="nf">matrix_multiply</span><span class="o">:</span><span class="w"> </span><span class="n">matrix_multiply</span>.<span class="n">cu</span>
<span class="w">    </span><span class="k">$(</span>NVCC<span class="k">)</span><span class="w"> </span><span class="k">$(</span>CUDA_FLAGS<span class="k">)</span><span class="w"> </span>-o<span class="w"> </span>matrix_multiply<span class="w"> </span>matrix_multiply.cu

<span class="nf">memory_demo</span><span class="o">:</span><span class="w"> </span><span class="n">memory_management</span>.<span class="n">cu</span>
<span class="w">    </span><span class="k">$(</span>NVCC<span class="k">)</span><span class="w"> </span><span class="k">$(</span>CUDA_FLAGS<span class="k">)</span><span class="w"> </span>-o<span class="w"> </span>memory_demo<span class="w"> </span>memory_management.cu

<span class="nf">clean</span><span class="o">:</span>
<span class="w">    </span>rm<span class="w"> </span>-f<span class="w"> </span>vector_add<span class="w"> </span>vector_multiply<span class="w"> </span>matrix_multiply<span class="w"> </span>memory_demo

<span class="c"># Debug builds with device debugging enabled</span>
<span class="nf">debug</span><span class="o">:</span><span class="w"> </span><span class="n">CUDA_FLAGS</span> += -<span class="n">g</span> -<span class="n">G</span>
<span class="nf">debug</span><span class="o">:</span><span class="w"> </span><span class="n">all</span>

<span class="c"># Profile builds optimized for profiling</span>
<span class="nf">profile</span><span class="o">:</span><span class="w"> </span><span class="n">CUDA_FLAGS</span> += -<span class="n">lineinfo</span>
<span class="nf">profile</span><span class="o">:</span><span class="w"> </span><span class="n">all</span>

<span class="nf">.PHONY</span><span class="o">:</span><span class="w"> </span><span class="n">all</span> <span class="n">clean</span> <span class="n">debug</span> <span class="n">profile</span>
</code></pre></div>
<h3 id="2-build-commands">2. Build Commands<a class="headerlink" href="#2-build-commands" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>root@sjsujetson-01:/Developer/mycuda_samples#<span class="w"> </span>make
nvcc<span class="w"> </span>-std<span class="o">=</span>c++11<span class="w"> </span>-O3<span class="w"> </span>-arch<span class="o">=</span>sm_87<span class="w">   </span>-o<span class="w"> </span>vector_add<span class="w"> </span>vector_add.cu
nvcc<span class="w"> </span>-std<span class="o">=</span>c++11<span class="w"> </span>-O3<span class="w"> </span>-arch<span class="o">=</span>sm_87<span class="w">   </span>-o<span class="w"> </span>vector_multiply<span class="w"> </span>vector_multiply.cu
nvcc<span class="w"> </span>-std<span class="o">=</span>c++11<span class="w"> </span>-O3<span class="w"> </span>-arch<span class="o">=</span>sm_87<span class="w">   </span>-o<span class="w"> </span>matrix_multiply<span class="w"> </span>matrix_multiply.cu
nvcc<span class="w"> </span>-std<span class="o">=</span>c++11<span class="w"> </span>-O3<span class="w"> </span>-arch<span class="o">=</span>sm_87<span class="w">   </span>-o<span class="w"> </span>memory_demo<span class="w"> </span>memory_management.cu

<span class="c1"># Build all examples</span>
make<span class="w"> </span>all

<span class="c1"># Build individual examples</span>
make<span class="w"> </span>vector_add
make<span class="w"> </span>matrix_multiply

<span class="c1"># Build with debug information for profiling</span>
make<span class="w"> </span>profile

<span class="c1"># Clean build artifacts</span>
make<span class="w"> </span>clean
</code></pre></div>
<h3 id="3-alternative-cmake-build">3. Alternative CMake Build<a class="headerlink" href="#3-alternative-cmake-build" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c"># CMakeLists.txt</span>
<span class="nb">cmake_minimum_required</span><span class="p">(</span><span class="s">VERSION</span><span class="w"> </span><span class="s">3.18</span><span class="p">)</span>
<span class="nb">project</span><span class="p">(</span><span class="s">CudaExamples</span><span class="w"> </span><span class="s">LANGUAGES</span><span class="w"> </span><span class="s">CXX</span><span class="w"> </span><span class="s">CUDA</span><span class="p">)</span>

<span class="nb">set</span><span class="p">(</span><span class="s">CMAKE_CXX_STANDARD</span><span class="w"> </span><span class="s">11</span><span class="p">)</span>
<span class="nb">set</span><span class="p">(</span><span class="s">CMAKE_CUDA_STANDARD</span><span class="w"> </span><span class="s">11</span><span class="p">)</span>

<span class="c"># Find CUDA</span>
<span class="nb">find_package</span><span class="p">(</span><span class="s">CUDA</span><span class="w"> </span><span class="s">REQUIRED</span><span class="p">)</span>

<span class="c"># Set CUDA architecture (adjust for your GPU)</span>
<span class="nb">set</span><span class="p">(</span><span class="s">CMAKE_CUDA_ARCHITECTURES</span><span class="w"> </span><span class="s">87</span><span class="p">)</span><span class="w">  </span><span class="c"># For Jetson Orin</span>

<span class="c"># Add executables</span>
<span class="nb">add_executable</span><span class="p">(</span><span class="s">vector_add</span><span class="w"> </span><span class="s">vector_add.cu</span><span class="p">)</span>
<span class="nb">add_executable</span><span class="p">(</span><span class="s">vector_multiply</span><span class="w"> </span><span class="s">vector_multiply.cu</span><span class="p">)</span>
<span class="nb">add_executable</span><span class="p">(</span><span class="s">matrix_multiply</span><span class="w"> </span><span class="s">matrix_multiply.cu</span><span class="p">)</span>
<span class="nb">add_executable</span><span class="p">(</span><span class="s">memory_demo</span><span class="w"> </span><span class="s">memory_management.cu</span><span class="p">)</span>

<span class="c"># Set properties</span>
<span class="nb">set_property</span><span class="p">(</span><span class="s">TARGET</span><span class="w"> </span><span class="s">vector_add</span><span class="w"> </span><span class="s">PROPERTY</span><span class="w"> </span><span class="s">CUDA_SEPARABLE_COMPILATION</span><span class="w"> </span><span class="s">ON</span><span class="p">)</span>
<span class="nb">set_property</span><span class="p">(</span><span class="s">TARGET</span><span class="w"> </span><span class="s">vector_multiply</span><span class="w"> </span><span class="s">PROPERTY</span><span class="w"> </span><span class="s">CUDA_SEPARABLE_COMPILATION</span><span class="w"> </span><span class="s">ON</span><span class="p">)</span>
<span class="nb">set_property</span><span class="p">(</span><span class="s">TARGET</span><span class="w"> </span><span class="s">matrix_multiply</span><span class="w"> </span><span class="s">PROPERTY</span><span class="w"> </span><span class="s">CUDA_SEPARABLE_COMPILATION</span><span class="w"> </span><span class="s">ON</span><span class="p">)</span>
<span class="nb">set_property</span><span class="p">(</span><span class="s">TARGET</span><span class="w"> </span><span class="s">memory_demo</span><span class="w"> </span><span class="s">PROPERTY</span><span class="w"> </span><span class="s">CUDA_SEPARABLE_COMPILATION</span><span class="w"> </span><span class="s">ON</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># CMake build commands</span>
mkdir<span class="w"> </span>build<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>build
cmake<span class="w"> </span>..
make<span class="w"> </span>-j4
</code></pre></div>
<h2 id="profiling-with-nsight-systems">ğŸ“Š Profiling with Nsight Systems<a class="headerlink" href="#profiling-with-nsight-systems" title="Permanent link">&para;</a></h2>
<h3 id="1-install-nsight-systems">1. Install Nsight Systems<a class="headerlink" href="#1-install-nsight-systems" title="Permanent link">&para;</a></h3>
<p>Check the previous sections for the Nsight installation for Jetson
<div class="highlight"><pre><span></span><code><span class="c1"># Verify installation</span>
root@sjsujetson-01:/Developer/mycuda_samples#<span class="w"> </span>nsys<span class="w"> </span>--version
NVIDIA<span class="w"> </span>Nsight<span class="w"> </span>Systems<span class="w"> </span>version<span class="w"> </span><span class="m">2024</span>.5.4.34-245434855735v0
</code></pre></div></p>
<h3 id="2-basic-profiling-commands">2. Basic Profiling Commands<a class="headerlink" href="#2-basic-profiling-commands" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Profile vector addition with detailed GPU metrics</span>
root@sjsujetson-01:/Developer/mycuda_samples#<span class="w"> </span>nsys<span class="w"> </span>profile<span class="w"> </span>--stats<span class="o">=</span><span class="nb">true</span><span class="w"> </span>--force-overwrite<span class="o">=</span><span class="nb">true</span><span class="w"> </span>-o<span class="w"> </span>vector_add_profile<span class="w"> </span>./vector_add
Generated:
<span class="w">    </span>/Developer/mycuda_samples/vector_add_profile.nsys-rep
<span class="w">    </span>/Developer/mycuda_samples/vector_add_profile.sqlite

<span class="c1"># Profile with CUDA API tracing</span>
root@sjsujetson-01:/Developer/mycuda_samples#<span class="w"> </span>nsys<span class="w"> </span>profile<span class="w"> </span>--trace<span class="o">=</span>cuda,nvtx<span class="w"> </span>--stats<span class="o">=</span><span class="nb">true</span><span class="w"> </span>-o<span class="w"> </span>detailed_profile<span class="w"> </span>./matrix_multiply
Generated:
<span class="w">    </span>/Developer/mycuda_samples/detailed_profile.nsys-rep
<span class="w">    </span>/Developer/mycuda_samples/detailed_profile.sqlite

<span class="c1"># Profile with system-wide metrics</span>
root@sjsujetson-01:/Developer/mycuda_samples#<span class="w"> </span>nsys<span class="w"> </span>profile<span class="w"> </span>--trace<span class="o">=</span>cuda,osrt,nvtx<span class="w"> </span>--stats<span class="o">=</span><span class="nb">true</span><span class="w"> </span>--force-overwrite<span class="o">=</span><span class="nb">true</span><span class="w"> </span>-o<span class="w"> </span>system_profile<span class="w"> </span>./vector_multiply
Generated:
<span class="w">    </span>/Developer/mycuda_samples/system_profile.nsys-rep
<span class="w">    </span>/Developer/mycuda_samples/system_profile.sqlite

root@sjsujetson-01:/Developer/mycuda_samples#<span class="w"> </span>ls
Makefile<span class="w">                   </span>memory_management<span class="w">        </span>vector_add
detailed_profile.nsys-rep<span class="w">  </span>memory_management.cu<span class="w">     </span>vector_add.cu
detailed_profile.sqlite<span class="w">    </span>simple<span class="w">                   </span>vector_add_profile.nsys-rep
matrix_multiply<span class="w">            </span>simple.cu<span class="w">                </span>vector_add_profile.sqlite
matrix_multiply.cu<span class="w">         </span>system_profile.nsys-rep<span class="w">  </span>vector_multiply
memory_demo<span class="w">                </span>system_profile.sqlite<span class="w">    </span>vector_multiply.cu
</code></pre></div>
<h3 id="3-advanced-profiling-options">3. Advanced Profiling Options<a class="headerlink" href="#3-advanced-profiling-options" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Profile with custom duration and sampling</span>
root@sjsujetson-01:/Developer/mycuda_samples#<span class="w"> </span>nsys<span class="w"> </span>profile<span class="w"> </span>--duration<span class="o">=</span><span class="m">30</span><span class="w"> </span>--sample<span class="o">=</span>cpu<span class="w"> </span>--trace<span class="o">=</span>cuda,osrt<span class="w"> </span>-o<span class="w"> </span>long_profile<span class="w"> </span>./memory_demo
Collecting<span class="w"> </span>data...
<span class="o">[</span>Memory<span class="w"> </span>Manager<span class="o">]</span><span class="w"> </span>Starting<span class="w"> </span>async<span class="w"> </span>transfer<span class="w"> </span>demo...
<span class="o">[</span>Memory<span class="w"> </span>Manager<span class="o">]</span><span class="w"> </span>Starting<span class="w"> </span>unified<span class="w"> </span>memory<span class="w"> </span>demo...
First<span class="w"> </span><span class="m">5</span><span class="w"> </span>squared<span class="w"> </span>values:<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">16</span><span class="w"> </span>
<span class="o">[</span>Memory<span class="w"> </span>Manager<span class="o">]</span><span class="w"> </span>Running<span class="w"> </span>bandwidth<span class="w"> </span>test...
Host-to-Device<span class="w"> </span>Bandwidth:<span class="w"> </span><span class="m">7</span>.44411<span class="w"> </span>GB/s
Generating<span class="w"> </span><span class="s1">&#39;/tmp/nsys-report-48f4.qdstrm&#39;</span>
<span class="o">[</span><span class="m">1</span>/1<span class="o">]</span><span class="w"> </span><span class="o">[========================</span><span class="m">100</span>%<span class="o">]</span><span class="w"> </span>long_profile.nsys-rep
Generated:
<span class="w">    </span>/Developer/mycuda_samples/long_profile.nsys-rep

<span class="c1"># Profile with environment variables for detailed CUDA info</span>
root@sjsujetson-01:/Developer/mycuda_samples#<span class="w"> </span><span class="nv">CUDA_LAUNCH_BLOCKING</span><span class="o">=</span><span class="m">1</span><span class="w"> </span>nsys<span class="w"> </span>profile<span class="w"> </span>--trace<span class="o">=</span>cuda,nvtx<span class="w"> </span>--stats<span class="o">=</span><span class="nb">true</span><span class="w"> </span>-o<span class="w"> </span>blocking_profile<span class="w"> </span>./matrix_multiply
Generated:
<span class="w">    </span>/Developer/mycuda_samples/blocking_profile.nsys-rep
<span class="w">    </span>/Developer/mycuda_samples/blocking_profile.sqlite

<span class="c1"># Profile with memory transfer analysis</span>
root@sjsujetson-01:/Developer/mycuda_samples#<span class="w"> </span>nsys<span class="w"> </span>profile<span class="w"> </span>--trace<span class="o">=</span>cuda,osrt<span class="w"> </span>--cuda-memory-usage<span class="o">=</span><span class="nb">true</span><span class="w"> </span>-o<span class="w"> </span>memory_profile<span class="w"> </span>./memory_demo
Collecting<span class="w"> </span>data...
<span class="o">[</span>Memory<span class="w"> </span>Manager<span class="o">]</span><span class="w"> </span>Starting<span class="w"> </span>async<span class="w"> </span>transfer<span class="w"> </span>demo...
<span class="o">[</span>Memory<span class="w"> </span>Manager<span class="o">]</span><span class="w"> </span>Starting<span class="w"> </span>unified<span class="w"> </span>memory<span class="w"> </span>demo...
First<span class="w"> </span><span class="m">5</span><span class="w"> </span>squared<span class="w"> </span>values:<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">16</span><span class="w"> </span>
<span class="o">[</span>Memory<span class="w"> </span>Manager<span class="o">]</span><span class="w"> </span>Running<span class="w"> </span>bandwidth<span class="w"> </span>test...
Host-to-Device<span class="w"> </span>Bandwidth:<span class="w"> </span><span class="m">7</span>.35592<span class="w"> </span>GB/s
Generating<span class="w"> </span><span class="s1">&#39;/tmp/nsys-report-8aab.qdstrm&#39;</span>
<span class="o">[</span><span class="m">1</span>/1<span class="o">]</span><span class="w"> </span><span class="o">[========================</span><span class="m">100</span>%<span class="o">]</span><span class="w"> </span>memory_profile.nsys-rep
Generated:
<span class="w">    </span>/Developer/mycuda_samples/memory_profile.nsys-rep
</code></pre></div>
<h3 id="4-analyzing-profile-results">4. Analyzing Profile Results<a class="headerlink" href="#4-analyzing-profile-results" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Generate text report</span>
nsys<span class="w"> </span>stats<span class="w"> </span>vector_add_profile.nsys-rep

<span class="c1"># Export to SQLite for custom analysis</span>
nsys<span class="w"> </span><span class="nb">export</span><span class="w"> </span>--type<span class="o">=</span>sqlite<span class="w"> </span>vector_add_profile.nsys-rep

<span class="c1"># View in Nsight Systems GUI (if available)</span>
nsight-sys<span class="w"> </span>vector_add_profile.nsys-rep
</code></pre></div>
<h3 id="5-code-instrumentation-for-better-profiling">5. Code Instrumentation for Better Profiling<a class="headerlink" href="#5-code-instrumentation-for-better-profiling" title="Permanent link">&para;</a></h3>
<p>This part of the code is not tested.</p>
<div class="highlight"><pre><span></span><code><span class="c1">// Add NVTX markers for better profiling visibility</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;nvtx3/nvToolsExt.h&gt;</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">instrumented_vector_add</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Mark the beginning of memory allocation</span>
<span class="w">    </span><span class="n">nvtxRangePush</span><span class="p">(</span><span class="s">&quot;Memory Allocation&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="kt">float</span><span class="w"> </span><span class="o">*</span><span class="n">d_A</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="n">d_B</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="n">d_C</span><span class="p">;</span>
<span class="w">    </span><span class="n">cudaMalloc</span><span class="p">(</span><span class="o">&amp;</span><span class="n">d_A</span><span class="p">,</span><span class="w"> </span><span class="n">bytes</span><span class="p">);</span>
<span class="w">    </span><span class="n">cudaMalloc</span><span class="p">(</span><span class="o">&amp;</span><span class="n">d_B</span><span class="p">,</span><span class="w"> </span><span class="n">bytes</span><span class="p">);</span>
<span class="w">    </span><span class="n">cudaMalloc</span><span class="p">(</span><span class="o">&amp;</span><span class="n">d_C</span><span class="p">,</span><span class="w"> </span><span class="n">bytes</span><span class="p">);</span>

<span class="w">    </span><span class="n">nvtxRangePop</span><span class="p">();</span>

<span class="w">    </span><span class="c1">// Mark data transfer</span>
<span class="w">    </span><span class="n">nvtxRangePush</span><span class="p">(</span><span class="s">&quot;Host to Device Transfer&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">cudaMemcpy</span><span class="p">(</span><span class="n">d_A</span><span class="p">,</span><span class="w"> </span><span class="n">h_A</span><span class="p">.</span><span class="n">data</span><span class="p">(),</span><span class="w"> </span><span class="n">bytes</span><span class="p">,</span><span class="w"> </span><span class="n">cudaMemcpyHostToDevice</span><span class="p">);</span>
<span class="w">    </span><span class="n">cudaMemcpy</span><span class="p">(</span><span class="n">d_B</span><span class="p">,</span><span class="w"> </span><span class="n">h_B</span><span class="p">.</span><span class="n">data</span><span class="p">(),</span><span class="w"> </span><span class="n">bytes</span><span class="p">,</span><span class="w"> </span><span class="n">cudaMemcpyHostToDevice</span><span class="p">);</span>
<span class="w">    </span><span class="n">nvtxRangePop</span><span class="p">();</span>

<span class="w">    </span><span class="c1">// Mark kernel execution</span>
<span class="w">    </span><span class="n">nvtxRangePush</span><span class="p">(</span><span class="s">&quot;Kernel Execution&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">vector_add_kernel</span><span class="o">&lt;&lt;&lt;</span><span class="n">blocks</span><span class="p">,</span><span class="w"> </span><span class="n">threads_per_block</span><span class="o">&gt;&gt;&gt;</span><span class="p">(</span><span class="n">d_A</span><span class="p">,</span><span class="w"> </span><span class="n">d_B</span><span class="p">,</span><span class="w"> </span><span class="n">d_C</span><span class="p">,</span><span class="w"> </span><span class="n">N</span><span class="p">);</span>
<span class="w">    </span><span class="n">cudaDeviceSynchronize</span><span class="p">();</span>
<span class="w">    </span><span class="n">nvtxRangePop</span><span class="p">();</span>

<span class="w">    </span><span class="c1">// Mark result transfer</span>
<span class="w">    </span><span class="n">nvtxRangePush</span><span class="p">(</span><span class="s">&quot;Device to Host Transfer&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">cudaMemcpy</span><span class="p">(</span><span class="n">h_C</span><span class="p">.</span><span class="n">data</span><span class="p">(),</span><span class="w"> </span><span class="n">d_C</span><span class="p">,</span><span class="w"> </span><span class="n">bytes</span><span class="p">,</span><span class="w"> </span><span class="n">cudaMemcpyDeviceToHost</span><span class="p">);</span>
<span class="w">    </span><span class="n">nvtxRangePop</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="6-performance-optimization-tips">6. Performance Optimization Tips<a class="headerlink" href="#6-performance-optimization-tips" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Check GPU utilization</span>
nsys<span class="w"> </span>stats<span class="w"> </span>--report<span class="o">=</span>gpukernsum<span class="w"> </span>profile.nsys-rep

<span class="c1"># Analyze memory bandwidth utilization</span>
nsys<span class="w"> </span>stats<span class="w"> </span>--report<span class="o">=</span>gpumemtimesum<span class="w"> </span>profile.nsys-rep

<span class="c1"># Check for optimization opportunities</span>
nsys<span class="w"> </span>stats<span class="w"> </span>--report<span class="o">=</span>cudaapisum<span class="w"> </span>profile.nsys-rep
</code></pre></div>
<h3 id="7-automated-profiling-script">7. Automated Profiling Script<a class="headerlink" href="#7-automated-profiling-script" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>
<span class="c1"># profile_all.sh - Automated profiling script</span>

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Building examples...&quot;</span>
make<span class="w"> </span>clean<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>make<span class="w"> </span>profile

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Profiling vector addition...&quot;</span>
nsys<span class="w"> </span>profile<span class="w"> </span>--stats<span class="o">=</span><span class="nb">true</span><span class="w"> </span>--force-overwrite<span class="o">=</span><span class="nb">true</span><span class="w"> </span>-o<span class="w"> </span>vector_add_profile<span class="w"> </span>./vector_add

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Profiling matrix multiplication...&quot;</span>
nsys<span class="w"> </span>profile<span class="w"> </span>--stats<span class="o">=</span><span class="nb">true</span><span class="w"> </span>--force-overwrite<span class="o">=</span><span class="nb">true</span><span class="w"> </span>-o<span class="w"> </span>matrix_multiply_profile<span class="w"> </span>./matrix_multiply

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Generating reports...&quot;</span>
nsys<span class="w"> </span>stats<span class="w"> </span>vector_add_profile.nsys-rep<span class="w"> </span>&gt;<span class="w"> </span>vector_add_report.txt
nsys<span class="w"> </span>stats<span class="w"> </span>matrix_multiply_profile.nsys-rep<span class="w"> </span>&gt;<span class="w"> </span>matrix_multiply_report.txt

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Profiling complete. Check *_report.txt files for results.&quot;</span>
</code></pre></div>
<h2 id="performance-benchmarking">ğŸ¯ Performance Benchmarking<a class="headerlink" href="#performance-benchmarking" title="Permanent link">&para;</a></h2>
<h3 id="run-and-compare-results">Run and Compare Results<a class="headerlink" href="#run-and-compare-results" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Make executable and run</span>
chmod<span class="w"> </span>+x<span class="w"> </span>profile_all.sh
./profile_all.sh

<span class="c1"># Compare CPU vs GPU performance</span>
<span class="nb">time</span><span class="w"> </span>./vector_add<span class="w">    </span><span class="c1"># GPU version</span>
<span class="nb">time</span><span class="w"> </span>./vector_add_cpu<span class="w">  </span><span class="c1"># CPU version (if implemented)</span>

<span class="c1"># Monitor GPU usage during execution</span>
<span class="c1">#watch -n 1 nvidia-smi #nvidia-smi is not available in jetson</span>
</code></pre></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>